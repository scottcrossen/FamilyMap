package com.scottcrossen42.familymap.ui.activities;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.MenuItem;
import android.view.View;
import android.widget.CompoundButton;
import android.widget.LinearLayout;
import android.widget.Switch;

import com.joanzapata.android.iconify.IconDrawable;
import com.joanzapata.android.iconify.Iconify;
import com.scottcrossen42.familymap.R;
import com.scottcrossen42.familymap.model.Event;
import com.scottcrossen42.familymap.model.Filter;
import com.scottcrossen42.familymap.model.Model;
import com.scottcrossen42.familymap.model.Person;
import com.scottcrossen42.familymap.ui.RecyclerView.FilterRecycler.FilterAdapter;
import com.scottcrossen42.familymap.ui.RecyclerView.FilterRecycler.FilterElement;
import com.scottcrossen42.familymap.ui.RecyclerView.PersonRecycler.Element;
import com.scottcrossen42.familymap.ui.RecyclerView.PersonRecycler.EventElement;
import com.scottcrossen42.familymap.ui.RecyclerView.PersonRecycler.PersonElement;
import com.scottcrossen42.familymap.ui.RecyclerView.PersonRecycler.SearchAdapter;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;
import java.util.TreeSet;

public class FilterActivity extends AppCompatActivity {

    Filter filter = Filter.getInstance();

    private ArrayList<FilterElement> generateElements() {
        ArrayList<FilterElement> to_return = new ArrayList<>();
        Filter filter = Filter.getInstance();
        Iterator<String> index = filter.getFilters().iterator();
        while(index.hasNext()) {
            String description = index.next();
            to_return.add(new FilterElement(description, filter.isChecked(Filter.Type.DESCRIPTION, description), Filter.Type.DESCRIPTION));
        }
        if (filter.showFatherSide()) {
            to_return.add(new FilterElement(null, filter.isChecked(Filter.Type.FATHER_SIDE, null), Filter.Type.FATHER_SIDE));
        }
        if (filter.showMotherSide()) {
            to_return.add(new FilterElement(null, filter.isChecked(Filter.Type.MOTHER_SIDE, null), Filter.Type.MOTHER_SIDE));
        }
        if (filter.showMales()) {
            to_return.add(new FilterElement(null, filter.isChecked(Filter.Type.MALE_GENDER, null), Filter.Type.MALE_GENDER));
        }
        if (filter.showFemales()) {
            to_return.add(new FilterElement(null, filter.isChecked(Filter.Type.FEMALE_GENDER, null), Filter.Type.FEMALE_GENDER));
        }
        return to_return;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_filter);
        RecyclerView list_view = (RecyclerView) findViewById(R.id.filterRecycler);
        LinearLayoutManager manager = new LinearLayoutManager(this);
        manager.setOrientation(LinearLayoutManager.VERTICAL);
        list_view.setLayoutManager(manager);
        FilterAdapter adapter = new FilterAdapter(this, generateElements());
        list_view.setAdapter(adapter);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                finish();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
}
